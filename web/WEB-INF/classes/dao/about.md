
# dao层
存放数据库数据处理类\
数据库设计

### 数据表设计清单
[constanttype](#2)\
[user](#user)


<h4 id='2'>constanttype（常数类别表）</h4>

| **字段名**   | **字段编码**     | **数据类型** | **键值** | **可为空** | **注释**        |
|--------------|------------------|--------------|----------|------------|-----------------|
| id           | id               | int(9)       | 主键     | 否         | 自增长类型      |
| 常数类别编码 | constanttypecode | varchar(64)  |          | 否         | 如depttype      |
| 常数类别名称 | constanttypename | varchar(64)  |          | 否         | 如性别等        |
| 删除标记     | delmark          | int(1)       |          | 否         | 1-正常 0-已删除 |

#### *表名：constantitem（常数项表）*

| **字段名**     | **字段编码**   | **数据类型** | **键值** | **可为空** | **注释**                 |
|----------------|----------------|--------------|----------|------------|--------------------------|
| id             | id             | int(9)       | 主键     | 否         | 自增长类型               |
| 所属常数类别id | constanttypeid | int(9)       | 外键     | 否         | 指向*constanttype(*id*)* |
| 常数项编码     | contantcode    | varchar(64)  |          | 否         |                          |
| 常数项名称     | constantname   | varchar(64)  |          | 否         | 如男、女等               |
| 删除标记       | delmark        | int(1)       |          | 否         | 1-正常 0-已删除          |

#### *表名：department （科室表）*

| **字段名** | **字段编码**   | **数据类型** | **键值** | **可为空** | **默认值** | **注释**                           |
|------------|----------------|--------------|----------|------------|------------|------------------------------------|
| id         | id             | int(9)       | 主键     | 否         |            | 自增长类型                         |
| 科室编码   | deptcode       | varchar(64)  |          | 否         |            | 如：sjnk                           |
| 科室名称   | deptname       | varchar(64)  |          | 否         |            | 如：神经内科                       |
| 科室分类   | deptcategoryid | int(9)       | 外键     |            |            | 指向constantitem(id)               |
| 科室类型   | depttype       | int(1)       |          |            |            | 1-临床 2-医技 3-财务 4-行政 5-其它 |
| 删除标记   | delmark        | int(1)       |          | 否         | 1          | 1-正常 0-已删除                    |

#### *表名：registlevel (挂号级别表)*

| **字段名** | **字段编码** | **数据类型** | **键值** | **可为空** | **默认值** | **注释**        |
|------------|--------------|--------------|----------|------------|------------|-----------------|
| id         | id           | int(9)       | 主键     | 否         |            | 自增长类型      |
| 号别编码   | registcode   | varchar(64)  |          | 否         |            |                 |
| 号别名称   | registname   | varchar(64)  |          | 否         |            |                 |
| 显示顺序号 | sequenceno   | int(3)       |          |            |            |                 |
| 挂号费     | registfee    | decimal(8,2) |          |            |            |                 |
| 挂号限额   | registquota  | int(3)       |          |            |            |                 |
| 删除标记   | delmark      | int(1)       |          | 否         | 1          | 1-正常 0-已删除 |

<h4 id="user">user （用户表）</h4>

| **字段名**   | **字段编码** | **数据类型** | **键值** | **可为空** | **默认值** | **注释**                                                                  |
|--------------|--------------|--------------|----------|------------|------------|---------------------------------------------------------------------------|
| id           | id           | int(9)       | 主键     | 否         |            | 自增长类型                                                                |
| 登录名       | username     | varchar(64)  |          | 否         |            |                                                                           |
| 密码         | password     | varchar(64)  |          | 否         |            |                                                                           |
| 真实姓名     | realname     | varchar(64)  |          | 否         |            |                                                                           |
| 用户类别     | usetype      | int(1)       |          |            |            | 1-医院管理员 2-挂号收费员 3-门诊医生 4-医技医生 5-药房操作员 6-财务管理员 |
| 医生职称id   | doctitleid   | int(9)       | 外键     |            |            | 指向constatntitem（id）                                                   |
| 是否参与排班 | isscheduling | char(1)      |          |            |            | 是/否                                                                     |
| 所在科室id   | deptid       | int(9)       | 外键     |            |            | 指向*department(*id*)*                                                    |
| 挂号级别id   | registleid   | int(9)       | 外键     |            |            | 指向*registlevel (id)*                                                    |
| 删除标记     | delmark      | int(1)       |          | 否         | 1          | 1-正常 0-已删除                                                           |

#### *表名：settlecategory (结算类别表)*

| **字段名** | **字段编码** | **数据类型** | **键值** | **可为空** | **默认值** | **注释**        |
|------------|--------------|--------------|----------|------------|------------|-----------------|
| id         | id           | int(9)       | 主键     | 否         |            | 自增长类型      |
| 类别编码   | settlecode   | varchar(64)  |          | 否         |            |                 |
| 类别名称   | settlename   | varchar(64)  |          | 否         |            |                 |
| 显示顺序号 | sequenceno   | int(3)       |          |            |            |                 |
| 删除标记   | delmark      | int(1)       |          | 否         | 1          | 1-正常 0-已删除 |

#### *表名：disecategory (疾病分类表)*

| **字段名** | **字段编码** | **数据类型** | **键值** | **可为空** | **默认值** | **注释**        |
|------------|--------------|--------------|----------|------------|------------|-----------------|
| id         | id           | int(9)       | 主键     | 否         |            | 自增长类型      |
| 分类编码   | dicacode     | varchar(64)  |          | 否         |            |                 |
| 分类名称   | dicaname     | varchar(64)  |          | 否         |            |                 |
| 显示顺序号 | sequenceno   | int(3)       |          |            |            |                 |
| 疾病类型   | dicatype     | int(1)       |          | 否         |            | 1-西医 2-中医   |
| 删除标记   | delmark      | int(1)       |          | 否         | 1          | 1-正常 0-已删除 |

#### *表名：disease (疾病表)*

| **字段名**   | **字段编码**   | **数据类型** | **键值** | **可为空** | **默认值** | **注释**               |
|--------------|----------------|--------------|----------|------------|------------|------------------------|
| id           | id             | int(9)       | 主键     | 否         |            | 自增长类型             |
| 疾病助记编码 | diseasecode    | varchar(64)  |          | 否         |            |                        |
| 疾病名称     | diseasename    | varchar(255) |          | 否         |            |                        |
| 国际icd编码  | diseaseicd     | varchar(64)  |          |            |            |                        |
| 疾病所属分类 | disecategoryid | int(9)       | 外键     | 否         |            | 指向*disecategory(id)* |
| 删除标记     | delmark        | int(1)       |          | 否         | 1          | 1-正常 0-已删除        |

#### *表名：expenseclass(费用科目表)*

| **字段名**   | **字段编码** | **数据类型** | **键值** | **可为空** | **默认值** | **注释**        |
|--------------|--------------|--------------|----------|------------|------------|-----------------|
| id           | id           | int(9)       | 主键     | 否         |            | 自增长类型      |
| 费用科目编码 | expcode      | varchar(64)  |          | 否         |            |                 |
| 费用科目名称 | expname      | varchar(64)  |          | 否         |            |                 |
| 删除标记     | delmark      | int(1)       |          | 否         | 1          | 1-正常 0-已删除 |

#### *表名：fmeditem(非药品收费项目表)*

| **字段名**     | **字段编码**   | **数据类型** | **键值** | **可为空** | **默认值** | **注释**              |
|----------------|----------------|--------------|----------|------------|------------|-----------------------|
| id             | id             | int(9)       | 主键     | 否         |            | 自增长类型            |
| 项目编码       | itemcode       | varchar(64)  |          | 否         |            |                       |
| 项目名称       | itemname       | varchar(64)  |          | 否         |            |                       |
| 规格           | format         | varchar(64)  |          |            |            |                       |
| 单价           | price          | decimal(8,2) |          | 否         |            |                       |
| 所属费用科目id | expclassid     | int(9)       | 外键     |            |            | 指向expenseclass (id) |
| 执行科室id     | deptid         | int(9)       | 外键     |            |            | 指向department(id)    |
| 拼音助记码     | mnemoniccode   | varchar(64)  |          |            |            |                       |
| 创建时间       | creationdate   | datetime     |          | 否         |            |                       |
| 最后修改时间   | lastupdatedate | datetime     |          |            |            |                       |
| 项目类型       | recordtype     | int (1)      |          | 否         |            | 1-检查 2-检验 3-处置  |
| 删除标记       | delmark        | int(1)       |          | 否         | 1          | 1-正常 0-已删除       |

#### *表名：drugs (药品目录表)*

| **字段名**   | **字段编码**   | **数据类型** | **键值** | **可为空** | **默认值** | **注释**                |
|--------------|----------------|--------------|----------|------------|------------|-------------------------|
| id           | id             | int(9)       | 主键     | 否         |            | 自增长类型              |
| 药品编码     | drugscode      | char(14)     |          | 否         |            |                         |
| 药品名称     | drugsname      | varchar(64)  |          | 否         |            |                         |
| 药品规格     | drugsformat    | varchar(64)  |          |            |            |                         |
| 包装单位     | drugsunit      | varchar(64)  |          |            |            |                         |
| 生产厂家     | manufacturer   | varchar(512) |          |            |            |                         |
| 药品剂型     | drugsdosageid  | int(9)       | 外键     |            |            | 指向constatntitem（id） |
| 药品类型     | drugstypeid    | int(9)       | 外键     |            |            | 指向constatntitem（id） |
| 药品单价     | drugsprice     | decimal(8,2) |          | 否         |            |                         |
| 拼音助记码   | mnemoniccode   | varchar(64)  |          |            |            |                         |
| 创建时间     | creationdate   | datetime     |          | 否         |            |                         |
| 最后修改时间 | lastupdatedate | datetime     |          |            |            |                         |
| 删除标记     | delmark        | int(1)       |          | 否         | 1          | 1-正常 0-已删除         |

#### *表名： rule（排班规则表）*

| **字段名** | **字段编码** | **数据类型** | **键值** | **可为空** | **默认值** | **注释**                                                                                                  |
|------------|--------------|--------------|----------|------------|------------|-----------------------------------------------------------------------------------------------------------|
| id         | id           | int(9)       | 主键     | 否         |            | 自增长类型                                                                                                |
| 规则名称   | rulename     | varchar(64)  |          | 否         |            |                                                                                                           |
| 科室id     | deptid       | int(9)       | 外键     | 否         |            | 指向*department(*id*)*                                                                                    |
| 医生id     | userid       | int(9)       | 外键     | 否         |            | 指向user*(id)*                                                                                            |
| 星期       | week         | varchar(14)  |          | 否         |            | 14位1和0 组成的字符串，1代表有班 0代表无班 14位字符串从左到右依次表示表示星期1-星期日，每天两位表示上下午 |
| 删除标记   | delmark      | int(1)       |          | 否         | 1          | 1-正常 0-已删除                                                                                           |

#### *表名： scheduling（排班表）*

| **字段名** | **字段编码** | **数据类型** | **键值** | **可为空** | **默认值** | **注释**               |
|------------|--------------|--------------|----------|------------|------------|------------------------|
| id         | id           | int(9)       | 主键     | 否         |            | 自增长类型             |
| 排班日期   | scheddate    | date         |          | 否         |            |                        |
| 科室id     | deptid       | int(9)       | 外键     | 否         |            | 指向*department(*id*)* |
| 医生id     | userid       | int(9)       | 外键     | 否         |            | 指向user*(id)*         |
| 午别       | noon         | char(2)      |          | 否         |            | 上午/下午              |
| 排班规则id | ruleid       | int(9)       | 外键     | 否         |            | 指向*rule (*id*)*      |

#### *表名：register (患者历次挂号信息表)*

| **字段名**     | **字段编码** | **数据类型** | **键值** | **可为空** | **默认值** | **注释**                                |
|----------------|--------------|--------------|----------|------------|------------|-----------------------------------------|
| id             | id           | int(9)       | 主键     | 否         |            | 自增长类型                              |
| 病历号         | casenumber   | varchar(64)  |          | 否         |            |                                         |
| 姓名           | realname     | varchar(64)  |          | 否         |            |                                         |
| 性别           | gender       | int(9)       | 外键     | 否         |            | 指向constatntitem（id）                 |
| 身份证号       | idnumber     | varchar(18)  |          |            |            |                                         |
| 出生日期       | birthdate    | date         |          |            |            |                                         |
| 年龄           | age          | int(3)       |          |            |            |                                         |
| 年龄类型       | agetype      | char(1)      |          |            |            | 岁/月/天                                |
| 家庭住址       | homeaddress  | varchar(64)  |          |            |            |                                         |
| 本次看诊日期   | visitdate    | date         |          | 否         |            |                                         |
| 午别           | noon         | char(2)      |          | 否         |            | 上午/下午                               |
| 本次挂号科室id | deptid       | int(9)       | 外键     | 否         |            | 指向*department(*id*)*                  |
| 本次挂号医生id | userid       | int(9)       | 外键     | 否         |            | 指向user*(id)*                          |
| 本次挂号级别id | registleid   | int(9)       | 外键     | 否         |            | 指向*registlevel (id)*                  |
| 结算类别id     | settleid     | int(9)       | 外键     | 否         |            | 指向*settlecategory(id)*                |
| 病历本要否     | isbook       | char(1)      |          |            |            | 是/否                                   |
| 挂号时间       | registtime   | datetime     |          | 否         |            |                                         |
| 挂号员id       | registerid   | int(9)       | 外键     | 否         |            | 指向user(id)                            |
| 本次看诊状态   | visitstate   | int(1)       |          | 否         |            | 1-已挂号 2-医生接诊 3-看诊结束 4-已退号 |

#### *表名： medicalrecord (患者病历首页表)*

| **字段名**   | **字段编码** | **数据类型** | **键值** | **可为空** | **默认值** | **注释**               |
|--------------|--------------|--------------|----------|------------|------------|------------------------|
| id           | id           | int(9)       | 主键     | 否         |            | 自增长类型             |
| 病历号       | casenumber   | varchar(64)  |          | 否         |            |                        |
| 挂号id       | *registid*   | int(9)       | 外键     | 否         |            | 指向*register(id)*     |
| 主诉         | readme       | varchar(512) |          |            |            |                        |
| 现病史       | present      | varchar(512) |          |            |            |                        |
| 现病治疗情况 | presenttreat | varchar(512) |          |            |            |                        |
| 既往史       | history      | varchar(512) |          |            |            |                        |
| 过敏史       | allergy      | varchar(512) |          |            |            |                        |
| 体格检查     | physique     | varchar(512) |          |            |            |                        |
| 检查建议     | proposal     | varchar(512) |          |            |            |                        |
| 注意事项     | careful      | varchar(512) |          |            |            |                        |
| 检查结果     | checkresult  | varchar(512) |          |            |            |                        |
| 诊断结果     | diagnosis    | varchar(512) |          |            |            |                        |
| 处理意见     | handling     | varchar(512) |          |            |            |                        |
| 病历状态     | casestate    | int（1）     |          |            |            | 1-暂存 2-已提交 3-诊毕 |

#### *表名：*medicaldisease (患者评估/诊断*表*)

| **字段名** | **字段编码** | **数据类型** | **键值** | **可为空** | **默认值** | **注释**                 |
|------------|--------------|--------------|----------|------------|------------|--------------------------|
| id         | id           | int(9)       | 主键     | 否         |            | 自增长类型               |
| 病历id     | medicalid    | int(9)       | 外键     | 否         |            | 指向*medicalrecord (id)* |
| 挂号id     | *registid*   | int(9)       | 外键     | 否         |            | 指向*register(id)*       |
| 疾病id     | diseaseid    | int(9)       | 外键     | 否         |            | 指向*disease(id)*        |
| 诊断类型   | diagnosetype | int（1）     |          |            |            | 1-西医 2-中医            |
| 发病日期   | getsiskdate  | datetime     |          |            |            |                          |
| 诊断种类   | diagnosecate | int（1）     |          |            |            | 1-初诊 2-终诊            |

#### *表名：checkapply (患者检查/检验/处置申请表)*

| **字段名**     | **字段编码** | **数据类型** | **键值** | **可为空** | **默认值** | **注释**                                                     |
|----------------|--------------|--------------|----------|------------|------------|--------------------------------------------------------------|
| id             | id           | int(9)       | 主键     | 否         |            | 自增长类型                                                   |
| 病历id         | medicalid    | int(9)       | 外键     | 否         |            | 指向*medicalrecord (id)*                                     |
| 挂号id         | *registid*   | int(9)       | 外键     | 否         |            | 指向*register(id)*                                           |
| 项目id         | *itemid*     | int(9)       | 外键     | 否         |            | 指向*fmeditem(id)*                                           |
| 项目名称       | name         | varchar(64)  |          | 否         |            |                                                              |
| 目的要求       | objective    | varchar(512) |          |            |            |                                                              |
| 检查部位       | position     | varchar(64)  |          |            |            |                                                              |
| 是否加急       | isurgent     | int(1)       |          |            | 0          | 1为加急 0为不加急                                            |
| 数量           | num          | int(3)       |          |            |            |                                                              |
| 开立时间       | creationtime | datetime     |          | 否         |            |                                                              |
| 开立医生id     | doctorid     | int (9)      | 外键     |            |            | 指向user(id)                                                 |
| 检查人员id     | checkoperid  | int(9)       | 外键     | 否         |            | 指向user*(id)*                                               |
| 结果录入人员id | resultoperid | int(9)       | 外键     | 否         |            | 指向user*(id)*                                               |
| 检查时间       | checktime    | datetime     |          |            |            |                                                              |
| 检查结果       | result       | varchar(512) |          |            |            |                                                              |
| 结果时间       | resulttime   | datetime     |          |            |            |                                                              |
| 状态           | state        | int（9）     |          |            |            | 1-暂存 2-已开立 3-已交费 4-已登记 5-执行完 6-已退费 0-已作废 |
| 记录类型       | recordtype   | int (1)      |          | 否         |            | 1-检查 2-检验 3-处置                                         |

#### *表名：checktemplate (检查/检验/处置申请模板表)*

| **字段名** | **字段编码** | **数据类型** | **键值** | **可为空** | **默认值** | **注释**             |
|------------|--------------|--------------|----------|------------|------------|----------------------|
| id         | id           | int(9)       | 主键     | 否         |            | 自增长类型           |
| 名称       | name         | varchar(64)  |          | 否         |            |                      |
| 医生id     | userid       | int(9)       | 外键     | 否         |            | 指向user*(id)*       |
| 创建时间   | creationtime | datetime     |          | 否         |            |                      |
| 使用范围   | scope        | char(2)      |          |            |            | 全院/科室/个人       |
| 记录类型   | recordtype   | int (1)      |          | 否         |            | 1-检查 2-检验 3-处置 |
| 删除标记   | delmark      | int(1)       |          | 否         | 1          | 1-正常 0-已删除      |

#### *表名：checkrelation (检查/检验/处置模板明细表)*

| **字段名** | **字段编码**  | **数据类型** | **键值** | **可为空** | **默认值** | **注释**                 |
|------------|---------------|--------------|----------|------------|------------|--------------------------|
| id         | id            | int(9)       | 主键     | 否         |            | 自增长类型               |
| 项目id     | *checkprojid* | int(9)       | 外键     | 否         |            | 指向*fmeditem(id)*       |
| 申请模板id | *checktempid* | int(9)       | 外键     | 否         |            | 指向*checktemplate (id)* |
| 检查部位   | position      | varchar(64)  |          |            |            |                          |

#### *表名：prescription (患者成药处方表)*

| **字段名** | **字段编码**        | **数据类型** | **键值** | **可为空** | **默认值** | **注释**                 |
|------------|---------------------|--------------|----------|------------|------------|--------------------------|
| id         | id                  | int(9)       | 主键     | 否         |            | 自增长类型               |
| 病历id     | *medicalid*         | int(9)       | 外键     | 否         |            | 指向*medicalrecord (id)* |
| 挂号id     | *registid*          | int(9)       | 外键     | 否         |            | 指向*register(id)*       |
| 开立医生id | userid              | int(9)       | 外键     | 否         |            | 指向user*(id)*           |
| 处方名称   | *prescriptionname*  | varchar(64)  |          | 否         |            |                          |
| 开立时间   | *prescriptiontime*  | datetime     |          | 否         |            |                          |
| 处方状态   | *prescription*state | int(1)       |          | 否         |            | 1-暂存 2-已开立 0-已作废 |

#### *表名：prescriptiondetailed (患者成药处方明细表)*

| **字段名** | **字段编码**   | **数据类型** | **键值** | **可为空** | **默认值** | **注释**                                     |
|------------|----------------|--------------|----------|------------|------------|----------------------------------------------|
| id         | id             | int(9)       | 主键     | 否         |            | 自增长类型                                   |
| 成药处方id | prescriptionid | int(9)       | 外键     | 否         |            | 指向*prescription (id)*                      |
| 药品id     | drugsid        | int(9)       | 外键     | 否         |            | 指向*drugs (id)*                             |
| 用法       | drugsusage     | varchar(64)  |          |            |            |                                              |
| 用量       | dosage         | varchar(64)  |          |            |            |                                              |
| 频次       | frequency      | varchar(64)  |          |            |            |                                              |
| 数量       | amount         | decimal(8,2) |          | 否         |            |                                              |
| 状态       | state          | int（1）     |          |            |            | 2-已开立 3-已交费 4-已发药 5-已退药 6-已退费 |

#### *表名：*drugstemplate (成药处方模板表)

| **字段名** | **字段编码** | **数据类型** | **键值** | **可为空** | **默认值** | **注释**        |
|------------|--------------|--------------|----------|------------|------------|-----------------|
| id         | id           | int(9)       | 主键     | 否         |            | 自增长类型      |
| 名称       | name         | varchar(64)  |          | 否         |            |                 |
| 医生id     | userid       | int(9)       | 外键     | 否         |            | 指向user*(id)*  |
| 创建时间   | creationtime | datetime     |          | 否         |            |                 |
| 使用范围   | scope        | char(2)      |          |            |            | 全院/科室/个人  |
| 删除标记   | delmark      | int(1)       |          | 否         | 1          | 1-正常 0-已删除 |

#### *表名：*drugsdetailed (成药模板明细表)

| **字段名** | **字段编码** | **数据类型** | **键值** | **可为空** | **默认值** | **注释**                 |
|------------|--------------|--------------|----------|------------|------------|--------------------------|
| id         | id           | int(9)       | 主键     | 否         |            | 自增长类型               |
| 成药模板id | drugstempid  | int(9)       | 外键     | 否         |            | 指向drugstemplate *(id)* |
| 药品id     | drugsid      | int(9)       | 外键     | 否         |            | 指向drugs *(id)*         |
| 用法       | drugsusage   | varchar(64)  |          |            |            |                          |
| 用量       | dosage       | varchar(64)  |          |            |            |                          |
| 频次       | frequency    | varchar(64)  |          |            |            |                          |

#### *表名：*herbalprescription (患者草药处方表)

| **字段名** | **字段编码**       | **数据类型** | **键值** | **可为空** | **默认值** | **注释**                                                     |
|------------|--------------------|--------------|----------|------------|------------|--------------------------------------------------------------|
| id         | id                 | int(9)       | 主键     | 否         |            | 自增长类型                                                   |
| 病历id     | *medicalid*        | int(9)       | 外键     | 否         |            | 指向*medicalrecord (id)*                                     |
| 挂号id     | *registid*         | int(9)       | 外键     | 否         |            | 指向*register(id)*                                           |
| 开立医生id | doctorid           | int(9)       | 外键     | 否         |            | 指向user*(id)*                                               |
| 处方名称   | *prescriptionname* | varchar(64)  |          | 否         |            |                                                              |
| 开立时间   | creationtime       | datetime     |          | 否         |            |                                                              |
| 处方类型   | *prescriptiotype*  | varchar(64)  |          |            |            | 水煎煮/酒泡/打粉/制丸/装胶囊等                               |
| 付数       | paynumber          | int(3)       |          |            |            |                                                              |
| 频次       | frequency          | varchar(64)  |          |            |            |                                                              |
| 用法       | drugsusage         | varchar(64)  |          |            |            | 内服/外用                                                    |
| 治法       | therapy            | varchar(512) |          |            |            |                                                              |
| 治法详细   | detailed           | varchar(512) |          |            |            |                                                              |
| 医嘱       | advice             | varchar(512) |          |            |            |                                                              |
| 状态       | state              | int（1）     | 外键     |            |            | 1-暂存 2-已开立 3-已交费 4-已取药 5-已退药 6-已退费 0-已作废 |

#### *表名：*herbaldetailed (草药处方明细表)

| **字段名** | **字段编码** | **数据类型** | **键值** | **可为空** | **默认值** | **注释**                      |
|------------|--------------|--------------|----------|------------|------------|-------------------------------|
| id         | id           | int(9)       | 主键     | 否         |            | 自增长类型                    |
| 草药处方id | herbalpresid | int(9)       | 外键     | 否         |            | 指向herbalprescription *(id)* |
| 药品id     | herbalid     | int(9)       | 外键     | 否         |            | 指向drugs*(id)*               |
| 用量       | dosage       | varchar(64)  |          |            |            |                               |
| 药品单价   | price        | decimal(8,2) |          | 否         |            |                               |
| 脚注       | footnote     | varchar(64)  |          |            |            |                               |

#### *表名：*herbaltemplate (草药处方模板表)

| **字段名** | **字段编码**      | **数据类型** | **键值** | **可为空** | **默认值** | **注释**                       |
|------------|-------------------|--------------|----------|------------|------------|--------------------------------|
| id         | id                | int(9)       | 主键     | 否         |            | 自增长类型                     |
| 名称       | *name*            | varchar(64)  |          | 否         |            |                                |
| 医生id     | doctorid          | int(9)       | 外键     | 否         |            | 指向user*(id)*                 |
| 创建时间   | creationtime      | datetime     |          | 否         |            |                                |
| 处方类型   | *prescriptiotype* | varchar(64)  |          |            |            | 水煎煮/酒泡/打粉/制丸/装胶囊等 |
| 付数       | paynumber         | int(3)       |          |            |            |                                |
| 用法       | drugsusage        | varchar(64)  |          |            |            |                                |
| 治法       | therapy           | varchar(512) |          |            |            |                                |
| 治法详细   | detailed          | varchar(512) |          |            |            |                                |
| 医嘱       | advice            | varchar(512) |          |            |            |                                |
| 使用范围   | scope             | varchar(64)  |          |            |            | 全院/科室/个人                 |
| 删除标记   | delmark           | int(1)       |          | 否         | 1          | 1-正常 0-已删除                |

#### *表名：*herbaltempdetailed (草药模板明细表)

| **字段名** | **字段编码** | **数据类型** | **键值** | **可为空** | **默认值** | **注释**                  |
|------------|--------------|--------------|----------|------------|------------|---------------------------|
| id         | id           | int(9)       | 主键     | 否         |            | 自增长类型                |
| 草药模板id | herbaltempid | int(9)       | 外键     | 否         |            | 指向herbaltemplate *(id)* |
| 药品id     | herbalid     | int(9)       | 外键     | 否         |            | 指向drugs*(id)*           |
| 用量       | dosage       | varchar(64)  |          |            |            |                           |
| 药品单位   | unit         | varchar(64)  |          |            |            |                           |
| 脚注       | footnote     | varchar(64)  |          |            |            |                           |

#### *表名：*patientcost*s (患者费用明细表)*

| **字段名**     | **字段编码** | **数据类型** | **键值** | **可为空** | **默认值** | **注释**               |
|----------------|--------------|--------------|----------|------------|------------|------------------------|
| id             | id           | int(9)       | 主键     | 否         |            | 自增长类型             |
| 挂号id         | registid     | int(9)       | 外键     | 否         |            | 指向*register (id)*    |
| 发票id         | *invoiceid*  | int(9)       | 外键     | 否         |            | 指向*invoice(id)*      |
| 项目id         | *itemid*     | int(9)       |          | 否         |            |                        |
| 项目类型       | *itemtype*   | int(1)       |          | 否         |            | 1-非药品 2-药品        |
| 项目名称       | name         | varchar(64)  |          | 否         |            |                        |
| 项目单价       | price        | decimal(8,2) |          | 否         |            |                        |
| 数量           | amount       | decimal(8,2) |          | 否         |            |                        |
| 执行科室id     | deptid       | int(9)       | 外键     | 否         |            | 指向*department(*id*)* |
| 开立时间       | createtime   | datetime     |          | 否         |            |                        |
| 开立人员id     | createoperid | int(9)       | 外键     | 否         |            | 指向user(id)           |
| 收/退费时间    | paytime      | datetime     |          | 否         |            |                        |
| 收/退费人员id  | registerid   | int(9)       | 外键     | 否         |            | 指向user(id)           |
| 收费方式       | feetype      | int（9）     | 外键     | 否         |            | 指向constantitem(id)   |
| 退费对应记录id | backid       | int(9)       |          |            |            |                        |

#### *表名：invoice (发票表)*

| **字段名**    | **字段编码** | **数据类型** | **键值** | **可为空** | **默认值** | **注释**                                                   |
|---------------|--------------|--------------|----------|------------|------------|------------------------------------------------------------|
| id            | id           | int(9)       | 主键     | 否         |            | 自增长类型                                                 |
| 发票号码      | invoicenum   | varchar(64)  |          | 否         |            |                                                            |
| 发票金额      | money        | decimal(8,2) |          | 否         |            |                                                            |
| 发票状态      | state        | int(1)       |          | 否         |            | 1-正常 2-作废 *3-未打印 4-已打印 5-已重打 6-已补打 7-冲红* |
| 收/退费时间   | creationtime | datetime     |          | 否         |            |                                                            |
| 收/退费人员id | userid       | int(9)       | 外键     | 否         |            | 指向user*(id)*                                             |
| 挂号id        | registid     | int(9)       | 外键     |            |            | register*(id)*                                             |
| 收费方式      | feetype      | int（9）     | 外键     | 否         |            | 指向constantitem(id)                                       |
| 冲红发票号码  | back         | varchar(64)  |          |            |            |                                                            |
| 日结审核状态  | dailystate   | int(1)       |          | 否         | 0          | 0-未日结 1-已提交 2-已审核                                 |

#### *表名：registwork (操作员日结表)*

| **字段名**   | **字段编码** | **数据类型** | **键值** | **可为空** | **默认值** | **注释**       |
|--------------|--------------|--------------|----------|------------|------------|----------------|
| id           | id           | int(9)       | 主键     | 否         |            | 自增长类型     |
| 收费人员id   | registerid   | int(9)       | 外键     | 否         |            | 指向user*(id)* |
| 日结起始时间 | starttime    | datetime     |          | 否         |            |                |
| 日结结束时间 | endtime      | datetime     |          | 否         |            |                |
